# План автоматизации тестирования

## 1. Автоматизируемые сценарии

### Тесты UI и DB

#### Позитивные:

##### UI-01
Покупка тура по «APPROVED» карте с валидными реквизитами (Happy Path, заканчивающийся срок действия карты);  
_Ожидаемый результат:_ сообщение об успешной оплате, запись инфо заказа в БД со статусом «APPROVED».

##### UI-02
Покупка тура в кредит по данным «APPROVED» карты с валидными реквизитами
(Happy Path, заканчивающийся срок действия карты);  
_Ожидаемый результат:_ сообщение об успешной оплате, запись инфо заказа в БД со статусом «APPROVED».

##### UI-03
Покупка тура по «APPROVED» карте с валидным именем владельца
(нижний регистр, верхний регистр, дефис, 2 символа, 27 символов);  
_Ожидаемый результат:_ сообщение об успешной оплате, запись инфо заказа в БД со статусом «APPROVED».

##### UI-04
Покупка тура в кредит по данным «APPROVED» карты с валидным именем владельца
(нижний регистр, верхний регистр, дефис, 2 символа, 27 символов);  
_Ожидаемый результат:_ сообщение об успешной оплате, запись инфо заказа в БД со статусом «APPROVED».

##### UI-05
Переход со страницы покупки тура на страницу покупки тура в кредит;  
_Ожидаемый результат:_ открытие страницы покупки тура в кредит.

##### UI-06
Переход со страницы покупки тура в кредит на страницу покупки тура;  
_Ожидаемый результат:_ открытие страницы покупки тура.

#### Негативные:

##### UI-07
Покупка тура по «DECLINED» карте с валидными реквизитами;  
_Ожидаемый результат:_ сообщение об ошибке оплаты, запись инфо заказа в БД со статусом «DECLINED».

##### UI-08
Покупка тура в кредит по данным «DECLINED» карты с валидными реквизитами;  
_Ожидаемый результат:_ сообщение об ошибке оплаты, запись инфо заказа в БД со статусом «DECLINED».

##### UI-09
Покупка тура по «APPROVED» карте с неправильным сроком действия (истекшим, больше возможного);  
_Ожидаемый результат:_ сообщение о неправильной дате, отсутствие записи инфо заказа в БД.

##### UI-10
Покупка тура в кредит по данным «APPROVED» карты с неправильным сроком действия (истекшим, больше возможного);  
_Ожидаемый результат:_ сообщение о неправильной дате, отсутствие записи инфо заказа в БД.

##### UI-11
Покупка тура по карте с невалидным номером
(неверный формат, 15 цифр, буквы, спец. символы, пробелы);  
_Ожидаемый результат:_ сообщение об ошибке ввода, отсутствие записи инфо заказа в БД.

##### UI-12
Покупка тура в кредит по данным карты с невалидным номером
(неверный формат, 15 цифр, буквы, спец. символы, пробелы);  
_Ожидаемый результат:_ сообщение об ошибке ввода, отсутствие записи инфо заказа в БД.

##### UI-13
Покупка тура по карте с невалидным месяцем
(00, 13, 1 цифра, буквы, спец. символы, пробелы);  
_Ожидаемый результат:_ сообщение об ошибке ввода, отсутствие записи инфо заказа в БД.

##### UI-14
Покупка тура в кредит по данным карты с невалидным месяцем
(00, 13, 1 цифра, буквы, спец. символы, пробелы);  
_Ожидаемый результат:_ сообщение об ошибке ввода, отсутствие записи инфо заказа в БД.

##### UI-15
Покупка тура по карте с невалидным годом
(00, 99, 1 цифра, буквы, спец. символы, пробелы);  
_Ожидаемый результат:_ сообщение об ошибке ввода, отсутствие записи инфо заказа в БД.

##### UI-16
Покупка тура в кредит по данным карты с невалидным годом
(00, 99, 1 цифра, буквы, спец. символы, пробелы);  
_Ожидаемый результат:_ сообщение об ошибке ввода, отсутствие записи инфо заказа в БД.

##### UI-17
Покупка тура по карте с невалидным именем владельца
(1 буква, кириллица, цифры, спец. символы, пробелы);  
_Ожидаемый результат:_ сообщение об ошибке ввода, отсутствие записи инфо заказа в БД.

##### UI-18
Покупка тура в кредит по данным карты с невалидным именем владельца
(1 буква, кириллица, цифры, спец. символы, пробелы);  
_Ожидаемый результат:_ сообщение об ошибке ввода, отсутствие записи инфо заказа в БД.

##### UI-19
Покупка тура по карте с невалидным кодом CVV
(2 цифры, буквы, спец. символы, пробелы);  
_Ожидаемый результат:_ сообщение об ошибке ввода, отсутствие записи инфо заказа в БД.

##### UI-20
Покупка тура в кредит по данным карты с невалидным кодом CVV
(2 цифры, буквы, спец. символы, пробелы);  
_Ожидаемый результат:_ сообщение об ошибке ввода, отсутствие записи инфо заказа в БД.

##### UI-21
Отправка формы с незаполненным номером карты;  
_Ожидаемый результат:_ сообщение об обязательном заполнении поля, отсутствие записи инфо заказа в БД.

##### UI-22
Отправка формы с незаполненным месяцем;  
_Ожидаемый результат:_ сообщение об обязательном заполнении поля, отсутствие записи инфо заказа в БД.

##### UI-23
Отправка формы с незаполненным годом;  
_Ожидаемый результат:_ сообщение об обязательном заполнении поля, отсутствие записи инфо заказа в БД.

##### UI-24
Отправка формы с незаполненным именем владельца;  
_Ожидаемый результат:_ сообщение об обязательном заполнении поля, отсутствие записи инфо заказа в БД.

##### UI-25
Отправка формы с незаполненным кодом CVV;  
_Ожидаемый результат:_ сообщение об обязательном заполнении поля, отсутствие записи инфо заказа в БД.

##### UI-26
Отправка пустой формы;  
_Ожидаемый результат:_ сообщение об обязательном заполнении полей, отсутствие записи инфо заказа в БД.

##### UI-27
Проверка допустимой длины поля «Номер карты»;  
_Ожидаемый результат:_ максимальная длина поля 19 символов.

##### UI-28
Проверка допустимой длины поля «Месяц»;  
_Ожидаемый результат:_ максимальная длина поля 2 символа.

##### UI-29
Проверка допустимой длины поля «Год»;  
_Ожидаемый результат:_ максимальная длина поля 2 символа.

##### UI-30
Проверка допустимой длины поля «Владелец»;  
_Ожидаемый результат:_ максимальная длина поля 27 символов.

##### UI-31
Проверка допустимой длины поля «CVC/CVV»;  
_Ожидаемый результат:_ максимальная длина поля 3 символа.

##### UI-32
Проверка отображения и значения плейсхолдера поля «Номер карты»;  
_Ожидаемый результат:_ плейсхолдер виден, содержит номер из 16 цифр.

##### UI-33
Проверка отображения и значения плейсхолдера поля «Месяц»;  
_Ожидаемый результат:_ плейсхолдер виден, содержит месяц из 2 цифр.

##### UI-34
Проверка отображения и значения плейсхолдера поля «Год»;  
_Ожидаемый результат:_ плейсхолдер виден, содержит год из 2 цифр.

##### UI-35
Проверка отображения и значения плейсхолдера поля «Владелец»;  
_Ожидаемый результат:_ плейсхолдер виден, содержит имя на латинице.

##### UI-36
Проверка отображения и значения плейсхолдера поля «CVC/CVV»;  
_Ожидаемый результат:_ плейсхолдер виден, содержит код из 3 цифр.

***
### Тесты API

#### Позитивные:

##### API-01
Отправка POST-запроса с реквизитами «APPROVED» карты для Payment Gate;  
_Ожидаемый результат:_ ответ с кодом 200 и статусом «APPROVED».

##### API-02
Отправка POST-запроса с реквизитами «DECLINED» карты для Payment Gate;  
_Ожидаемый результат:_ ответ с кодом 200 и статусом «DECLINED».

##### API-03
Отправка POST-запроса с реквизитами «APPROVED» карты для Credit Gate;  
_Ожидаемый результат:_ ответ с кодом 200 и статусом «APPROVED».

##### API-04
Отправка POST-запроса с реквизитами «DECLINED» карты для Credit Gate;  
_Ожидаемый результат:_ ответ с кодом 200 и статусом «DECLINED».

#### Негативные:

##### API-05
Отправка POST-запроса с невалидными реквизитами карты для Payment Gate (неверный формат, пустые ключи, пустое тело);  
_Ожидаемый результат:_ ответ с кодом и статусом 500.

##### API-06
Отправка POST-запроса с невалидными реквизитами карты для Credit Gate (неверный формат, пустые ключи, пустое тело);  
_Ожидаемый результат:_ ответ с кодом и статусом 500.

## 2. Используемые инструменты

#### Подготовка/запуск SUT и тестов:
* Docker – для развёртывания и управления СУБД, а так же симулятора банковских сервисов;
* Java – ЯП с удобной экосистемой, большим набором инструментов для автоматизации тестирования;
* IntelliJ IDEA – лучшая среда разработки для Java;
* Gradle – удобная и мощная система сборки для управления зависимостями;
* JUnit 5 – широко применяемая среда тестирования для Java-приложений;

#### Фреймворки и библиотеки:
* Selenide – самый функциональный и удобный фреймворк для авто-тестирования веб-интерфейса;
* MySQL(PostgreSQL) Connector/J – драйверы для взаимодействия с БД из кода;
* DbUtils – библиотека для упрощения работы с JDBC;
* REST Assured – библиотека для автоматизации тестирования REST API;
* Java Faker – библиотека для генерации тестовых данных;
* Lombok – библиотека для сокращения объема шаблонного кода и повышения его читабельности;
* Allure Report – оптимальный фреймворк для создания информативных отчётов о выполнении тестов;

#### Дополнительные:
* Google Chrome – для запуска авто-тестов и отладки в DevTools;
* Database Navigator – плагин для подключения к БД и отправки запросов из IntelliJ IDEA.

## 3. Возможные риски при автоматизации
* Приложение может меняться достаточно часто (в частности UI), а значит часть кода будет терять актуальность
  и приводить к падению тестов.
* Отсутствие уникальных идентификаторов для элементов, низкая степень тестируемости страницы.
* Правильность авто-тестов надо проверять, сравнивая их работу с результатами ручного тестирования.
  Например, не все элементы страницы могут распознаваться инструментом корректно.
* Тесты могут находить «ложные» дефекты и быть нестабильными – их тоже надо проверять вручную.
* Неверный выбор инструментов: их несовместимость между собой или с версией браузера.
* Время и ресурсы, потраченные на автоматизацию, могут превысить экономическую выгоду от ее внедрения
  на данном проекте.

## 4. Интервальная оценка времени
Затраты времени на автоматизацию тестирования с учетом рисков составят от 20 до 30 часов.

## 5. План сдачи работ
|  №  | Наименование работы              | Дата сдачи |
|:---:|:---------------------------------|:----------:|
|  1  | План автоматизации тестирования  | 18.05.2022 |
|  2  | Написание и отладка авто-тестов  | 23.05.2022 |
|  3  | Подготовка и оформление репортов | 25.05.2022 |
|  4  | Отчет по автоматизации           | 27.05.2022 |